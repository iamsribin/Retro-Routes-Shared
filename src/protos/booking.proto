syntax = "proto3";
package ride_package;

service Ride {
    rpc fetchVehicles (Empty) returns (FetchVehiclesRes) {}
  //-------booking rpc -------
  rpc bookCab (BookCabReq) returns (commonRes);
  rpc fetchDriverBookingList(fetchDriverBookingListReq) returns (fetchDriverBookingListRes) {}
  rpc fetchDriverBookingDetails(id) returns (BookingResponse) {}
  rpc checkSecurityPin(checkSecurityPinReq) returns (commonRes) {}
  rpc cancelRide(cancelRideReq) returns (commonRes) {}
  rpc completeRide(completeRideReq) returns (commonRes) {}

  rpc MarkAsPaid (MarkAsPaidRequest) returns (MarkAsPaidRes);
  rpc RollbackPayment (RollbackPaymentRequest) returns (MarkAsPaidRes);
}

message MarkAsPaidRequest {
  string bookingId = 1;
  string paymentId = 2;
}

message RollbackPaymentRequest {
  string bookingId = 1;
}

message MarkAsPaidRes {
  string status = 1; 
  string message = 2;
}

message fetchDriverBookingListReq{
  string id = 1;
  string role = 2;
}

message completeRideReq{
  string bookingId = 1;
  string userId = 2;
}

message cancelRideReq{
  string userId = 1;
  string rideId = 2;
}

message checkSecurityPinReq{
string securityPin =1;
string bookingId = 2;
}

message id {
  string id = 1;
}

message BookingResponse {
  int32 status = 1;
  string message = 2;
  string navigate = 3;
  BookingDetails data = 4;
}

message BookingDetails {
  string id = 1;

  UserInfo user = 2;
  DriverInfo driver = 3;

  string pickupLocation = 4;
  string dropoffLocation = 5;

  Coordinates pickupCoordinates = 6;
  Coordinates dropoffCoordinates = 7;

  string status = 8;
  double price = 9;
  string date = 10;
  string paymentMode = 11;
  string pin = 12;
  string feedback = 13;
  int32 rating = 14;

  string distance = 15;
  string duration = 16;
  string vehicleModel = 17;
}

message UserInfo {
  string userId = 1;
  string userName = 2;
  string userNumber = 3;
}

message DriverInfo {
  string driverId = 1;
  string driverName = 2;
  string driverNumber = 3;
}

message Coordinates {
  double latitude = 1;
  double longitude = 2;
}

message Booking {
  string _id = 1;
  string pickupLocation = 2;
  string dropoffLocation = 3;
  string distance = 4;
  double price = 5;
  string date = 6;  // ISO string
  string status = 7;
}

message fetchDriverBookingListRes {
  int32 status = 1;
  string message = 2;
  string navigate = 3;
  repeated Booking data = 4;
}

message Location {
  string address = 1;
  double latitude = 2;
  double longitude = 3;
}

message DistanceInfo {
  string distance = 1;
  double distanceInKm = 2;
}

message BookCabReq {
  Location pickupLocation = 1;
  Location dropOffLocation = 2;
  string vehicleModel = 3;
  string userName = 4;
  double estimatedPrice = 5;
  string estimatedDuration = 6;
  DistanceInfo distanceInfo = 7;
  string mobile = 8;
  string profile = 9; 
  string userId = 10;
}

message commonRes {
  int32 status = 1;
  string message = 2;
  string navigate = 3; 
  string data = 4; 
}


message Empty {}

message Pricing {
  string vehicleModel = 1;
  string image = 2;
  string minDistanceKm = 3;
  double basePrice = 4;
  double pricePerKm = 5;
  string eta = 6;
  repeated string features = 7;
  string updatedBy = 8;
  string updatedAt = 9; 
}


message FetchVehiclesRes {
  int32 status = 1;
  string message = 2;
  string navigate = 3; 
  repeated Pricing data = 4;
}